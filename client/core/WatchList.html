<head>
	<title>WatchList</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link href="assets/css/bootstrap-responsive.css" rel="stylesheet">
</head>

<body>
	<div id="watchlist">
		<div id="intro" class="hidden-phone">
			{{> intro}}
		</div>
		<div id="nav">
			{{> nav}}
		</div>
		<div id="main-container">
			{{> main}}
		</div>
		<div id="footer">
			{{#if currentUser}}
				{{> footer}}
			{{/if}}
		</div>
	</div>
</body>



<template name="intro">
	{{#unless hide}}
	<div class="hero-unit">
		<h1>Welcome to WatchList</h1>
		<h4>(Work in progress!)</h4>
		<p>It's basically a todo list for movies you want to watch, with the option to share/follow lists with friends.</p>
		{{#if currentUser}}
			<div href="#" class="btn btn-primary" id="hide">Ok, I get it.</div>
		{{/if}}
	</div>
	{{/unless}}
</template>



<template name="nav">
	<span class="login pull-right">
		{{loginButtons align="right"}}
	</span>
</template>



<template name="main">
	<div id="main-content">
	
	<div class="tabbable">
		<ul class="nav nav-tabs" id="content-tabs">
			<li><a href="#list" class="tab" data-toggle="tab"><i class="icon-list"></i> List</a></li>
			<li class="active"><a href="#add" class="tab" data-toggle="tab"><i class="icon-plus"></i> Add</a></li>
			<li><a href="#users" class="tab" data-toggle="tab"><i class="icon-user"></i> Users</a></li>
		</ul>
		<ul class="tab-content">
			<div class="tab-pane" id="list">
				{{#if currentUser}}
					{{#unless count}}
						<span class="no-movies">You haven't added any movies yet! You should <a href="#" class="add-movie">go do that.</a></span>
					{{else}}
					<div class="title">
						<h4>A List of Movies I Intend to Watch.</h4>
					</div>
					{{> filters}}
					{{> list}}
					{{/unless}}
				{{else}}
					<span class="no-movies">You haven't added any movies yet! You should <a href="#" class="add-movie">go do that.</a></span>
				{{/if}}
			</div>
			<div class="tab-pane active" id="add">
				{{#if currentUser}}
					{{> add_movie}}
				{{else}}
					<span class="logged-out">Sign in to start saving movies.</span>
				{{/if}}
			</div>
			<div class="tab-pane" id="users">
				{{#if currentUser}}
					{{> userlist}}
				{{else}}
					<span class="logged-out">Sign in to find other users.</span>
				{{/if}}
			</div>
		</ul>
	</div>


	</div>
</template>


<template name="filters">
	<ul class="nav nav-pills">
		<li class="{{no_filter}}"><a href="#" id="no-filter">All <span class="badge"></span></a></li>
		{{#each genres}}
			{{> genre}}
		{{/each}}
	</ul>
</template>



<template name="list">
	<table class="table table-striped">
		<thead>
			<th>Title</th>
			<th>Genre</th>
			<th>Release Date</th>
			<th>Listed By</th>
		</thead>
		{{#each movies}}
			{{> movie}}
		{{/each}}
	</table>
</template>


<template name="movie">
	<tr class="{{genre}}">
		<td>{{title}}</td>
		<td>{{genre}}</td>
		<td>{{date}}</td>
		<td>{{username}}</td>
		{{#if can_remove}}
			<td><div class="remove icon-remove"></div></td>
		{{/if}}
	</tr>
</template>



<template name="genre">
	<li class="{{active}}"><a href="#" class="filter {{this}}">{{this}}</a></li>
</template>



<template name="add_movie">
	<form class="span12">
		{{#if movie_added}}
			<div class="confirm alert {{alert_status}}">{{confirmation}}</div>
		{{/if}}
		<label for="new-title">Title</label>
		<input id="new-title" class="span12" placeholder="Enter movie title">
		<div class="control-group">
			<div class="controls">
				<label class="checkbox">
				<input type="checkbox" id="out-now">Out Now
				</label>
			</div>
		</div>
		{{#unless out_now}}
			<label for="new-date">Release Date</label>
			<input type="date" id="new-date">
		{{/unless}}
		<label for="new-genre">Genre</label>
		<select id="new-genre" class="span12">
			<option>Funny</option>
			<option>Serious</option>
			<option>SciFi</option>
			<option>TV</option>
			<option>Doco</option>
			<option>Indie</option>
			<option>Scary</option>
		</select>
		<div id="btn-add" class="btn btn-primary btn-block btn-large">Add</div>
	</form>
</template>



<template name="userlist">
	{{> adminpanel}}
	{{#isolate}}<small class="pull-right">Your list is <a class="btn-public {{is_public}}">public</a><span class="inactive">/</span><a class="btn-private {{is_private}}">private</a></small>{{/isolate}}
	<h1>Users</h1>
	{{#each users}}
		{{> user}}
	{{/each}}
	{{#if user_selected}}
		{{#if show_list}}
		<table class="table table-striped">
			<thead>
				<th>Title</th>
				<th>Genre</th>
			</thead>
			{{#each shared_movies}}
				{{> sharedmovie}}
			{{/each}}
		</table>
		{{else}}
			<div class="alert"><h5>{{username}} hasn't added any movies yet.</h5></div>
		{{/if}}
	{{/if}}
</template>


<template name="user">
	<div class="well well-small inline">
		<a href="#" class="user">{{username}}</a>
		<a class="btn btn-small {{following}} {{unfollow}}follow">{{#unless following}}<i class="icon-plus"></i>{{else}}<i class="icon-minus"></i>{{/unless}}</a>
	</div>
</template>



<template name="sharedmovie">
	<tr class="{{genre}}">
		<td>{{title}}</td>
		<td>{{genre}}</td>
	</tr>
</template>



<template name="adminpanel">
	{{#if admin}}
		{{#if user_selected}}
			<a href="#" class="btn btn-danger remove">Delete {{username}}</a>
		{{/if}}
	{{/if}}
</template>



<template name="footer">
	<div class="well well-small">
		<ul class="inline pull-right">
			
			<li>
			{{#unless confirm_delete}}
				<a href="#" id="delete">Delete My Account</a>
			{{else}}
				<span class="label label-important">Are you sure? <a href="#" id="confirm-delete">Yes</a> / <a href="#" id="dont-delete">No</a></span></li>
			{{/unless}}
		</ul>
	</div>
</template>